!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).waterMark=e()}(this,function(){"use strict";var e=function(){return(e=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function i(t){var e;return"Object"===(e=t,Object.prototype.toString.call(e).slice(8,-1))&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function u(t){var e=parseInt(t);return(e=isNaN(e)?0:e)+"px"}var o=(t.prototype.createMask=function(){var t,e=document.createElement("div");e.setAttribute("style","pointer-events:none;"),e.style.zIndex=String(this.config.zIndex),e.style.opacity=String(this.config.opacity),e.style.backgroundImage='url("'+this.createMaskImage()+'")',e.style.width="100%",e.style.top="0",e.style.left="0",this.$el===document.body?(e.style.height=this.$el.scrollHeight+"px",this.config.fixed?e.style.position="fixed":(this.$el.style.position="relative",e.style.position="absolute")):(this.$el.style.position="relative",this.config.fixed?(t=this.$el.getBoundingClientRect().height,e.style.position="sticky",e.style.height=u(t),e.style.marginBottom=u(-1*t)):(this.$el.style.position="relative",e.style.position="absolute",e.style.height=u(this.$el.scrollHeight))),this.$el.prepend(e),this.$mask=e},t.prototype.createMaskImage=function(){var i=this,t=function(t,e,i){void 0===i&&(i="1.4");var o=document.createElement("div");o.style.display="inline-block",o.style.whiteSpace="pre-wrap",o.style.position="fixed",o.style.opacity="0",o.style.fontSize=u(e),o.style.lineHeight=i,o.innerHTML=t,document.body.appendChild(o);var n=o.getBoundingClientRect(),s=n.width,l=n.height;return document.body.removeChild(o),{width:s,height:l}}(this.text,this.config.fontSize),e=t.width,o=t.height,n=Math.abs,s=Math.sin,l=Math.cos,r=this.config.rotate,h=this.config.gap,c=this.config.offset,a=c[0],f=c[1];a+=this.config.fontSize,f+=this.config.fontSize,r<0&&(f+=n(e*l(r)));function p(t,e){return"<text transform='translate("+t+", "+e+") rotate("+r+")' fill='"+d+"' font-size='"+i.config.fontSize+"'>"+i.text+"</text>"}var g=n(e*s(r))+n(o*l(r)),y=n(e*l(r))+n(o*s(r)),g=Math.ceil(g+a)+n(e*l(r))+2*h,y=Math.ceil(y)+h,d=encodeURIComponent(this.config.color);return"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='"+y+"px' width='"+g+"px'>"+p(a,f)+p(a+e+h/2,f+h)+"</svg>"},t.prototype.destroy=function(){this.$el.removeChild(this.$mask),this.$mask=null},t);function t(t){this.$el=document.body,this.$mask=null,this.text="",this.config={fixed:!0,fontSize:12,color:"#000",opacity:.08,gap:120,rotate:-15,offset:[0,0],zIndex:999999},i(t)?(this.config=e(e({},this.config),t),this.text=t.text,"string"==typeof t.el?this.$el=document.querySelector(t.el):t.el&&(this.$el=t.el)):this.text=t,this.$el&&this.createMask()}return function(t){return new o(t)}});
